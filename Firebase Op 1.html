<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <style>
        table, tr, td, th {
            border: 1px solid lightgray;
            border-collapse: collapse;
        }

        td, th {
            padding: 4px;
        }

        th {
            background-color: darkblue;
            border: 1px solid darkblue;
            color: white;
        }

        tr:nth-child(even) {
            background: antiquewhite;
        }
    </style>
</head>
<body>
    <div id="noe">noe </div>
    <!-- The core Firebase JS SDK is always required and must be listed first -->
    
    <script src="https://www.gstatic.com/firebasejs/7.6.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.6.1/firebase-firestore.js"></script>
    <button onclick="addTask()"> Add test data</button>

    <script>
        // Your web app's Firebase configuration
        var firebaseConfig = {
            apiKey: "AIzaSyB_B6DPcSFC5z0ec0uPPQH-rC6mpu8J8rE",
            authDomain: "fir-op-f0a2d.firebaseapp.com",
            databaseURL: "https://fir-op-f0a2d.firebaseio.com",
            projectId: "fir-op-f0a2d",
            storageBucket: "fir-op-f0a2d.appspot.com",
            messagingSenderId: "932462800248",
            appId: "1:932462800248:web:68f435e3708fbf34806c8d",
            measurementId: "G-L3ENL5KXLZ"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);

        // Model

        // Controller
        var taskout = document.getElementById('noe');
        var db = firebase.firestore();
        var taskCollection = db.collection('tasks');
       
        function addTask() {
            db.collection("tasks").add({
               tasks

            })
                .then(function (docRef) {
                    console.log("Document written with ID: ", docRef.id);
                })
                .catch(function (error) {
                    console.error("Error adding document: ", error);
                });

           // show();
        }
        // View
        var tasksTable = document.getElementById('tasksTable');
       
        let html = `<table>
                    <tr> <th>Navn</th>
                         <th>Oppgave</th>
                         <th>frist</th>
                          <th>Gjort</th>
                          <th>dato</th>
                     </tr>`;
       
        taskCollection.onSnapshot(
            function showDataFromDatabase() {



                taskCollection.get().then((document) => {

                    document.forEach((doc) => {
                        html += `

                            <tr>
                            <td>${doc.data().description}</td>
                            </tr>
                    `;
                      //  console.log(DotTask.data().tasks[2].description, html);

                    });
                    taskout.innerHTML = html;
                })
                
            })
            ;
            html += `</table>`;
              
        
            
        
        //var tasksTable = document.getElementById('tasksTable');
        //show();
        //function show() {
        //    
        //    for (let i = 1; i < tasks.length; i++) {
        //        html += createHtmlRow(i);
        //    }
        //    tasksTable.innerHTML = html;
        //}
        //function createHtmlRow(i) {
        //    const task = tasks[i];
        //    console.log(tasks);
        //    const checkedHtml = task.isDone ? 'checked="checked"' : '';
        //    if (!task.editMode)
        //        return `<tr>
        //                               <td>${task.name}</td>
        //                            <td>${task.description}</td>
        //                            <td>${task.frist}</td>
        //                            <td><input onchange="changeIsDone(this, ${i})" type="checkbox" ${checkedHtml} /></td>
        //                             <td>${task.dato}</td>
        //                            <td>
        //                                <button onclick="deleteTask(${i})">Slett</button>
        //                                <button onclick="editTask(${i})">Rediger</button>
        //                            </td>
        //                        </tr>
        //                        `;
        //    return `<tr>
        //                            <td><input id="editDescription${i}" type="text" value="${task.description}"/></td>
        //                           <td><input id="taskname{i}" type="text" value="${task.name}"/></td>
        //                            <td><input id="taskfrist{i}" type="text" value="${task.frist}"/></td>
        //                            <td><input onchange="changeIsDone(this, ${i})" type="checkbox" ${checkedHtml} /></td>
        //                            <td><input id="{i}" type="text" value="${task.dato}"/></td>
        //                            <td>
        //                                <button onclick="updateTask(${i})">Lagre</button>
        //                            </td>
        //                        </tr>
        //                        `;
        //}
        //function changeIsDone(checkbox, index) {
        //    tasks[index].isDone = checkbox.checked;
        //    tasks[index].dato = new Date().toISOString().substr(0, 10);
        //    show();
        //}
        //function deleteTask(index) {
        //    tasks.splice(index, 1);
        //    show();
        //}
        //function editTask(index) {
        //    tasks[index].editMode = true;
        //    show();
        //}
        //function Datoe() {

        //}

        //function updateTask(index) {
        //    const id = `editDescription${index}`;
        //    const inputTag = document.getElementById(id);
        //    const task = tasks[index];

        //    task.description = inputTag.value;
        //    task.name = inputTag.value;
        //    task.frist = inputTag.value;
        //    task.editMode = false;

        //    show();
        //}
        function add(inputTag) {
            let tasks = {
                name: inputTag.value(),
                description: inputTag.value(),
                date: new Date(),
                frist: new Date()

            };
            taskCollection.add(tasks);
        }

    </script>
</body>
</html>