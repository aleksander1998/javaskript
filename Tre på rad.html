<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <style>
        div{
            user-select:none;
        }
        div.popp {
            color:red;
            background-color:darkblue;
            width: 100px;
            height: 100px;
            float:left;
            margin:2px;
            font-size:500%;
            font-family:Helvetica;
            text-align:center;
        } div.l{
              clear:left;

          }
          div.colorx {
              color:blueviolet;
          }
          div.coloro {
              color:darkgreen;
          }
    </style>
</head>
<body>
    
    <div id="tallman"></div>
    <div id="outputDiv"></div>
    <script type="text/javascript">
        let tallDiv = document.getElementById('tallman');

        //model
        let tallman = ['', '', '', '', '', '', '', '', ''];
        let resualtFromWinning;
        show();

        //view
        show();
        function show() {
            let html = '';
            for (let i = 0; i < 9; i++) {
                let l = i % 3 == 0 ? 'l' : '';
                html += `
              <div onclick="setX(${i})"class=" popp color${tallman[i]} ${l}">${tallman[i]}</div>`;
                
            }
            tallDiv.innerHTML = html 
        }







        //controller
        function setX(index) {
            console.log(index);
            if (tallman[index] === '') {
                tallman[index] = 'x';
              
                setO();
            }
            checkWinning();
            show();
                }
        function setO() {
            let tommIndex = Array.from(tallman.keys()).filter(i => tallman[i] === '');
            if (tommIndex.length === 0) return;
            let OII = Math.floor(Math.random() * tommIndex.length);
            let tomIndex = tommIndex[OII];
            tallman[tomIndex] = 'o';
            checkWinning();
            show();
            

        }
       
        function checkWinning() {

            console.log("checkwinning kjøere" + tallman);
            if (tallman[0] == "x" && tallman[1] == 'x' && tallman[2] == 'x' ||
                tallman[0] == 'x' && tallman[3] == 'x' && tallman[6] == 'x' ||
                tallman[0] == 'x' && tallman[4] == 'x' && tallman[8] == 'x' ||
                tallman[6] == 'x' && tallman[7] == 'x' && tallman[8] == 'x' ||
                tallman[3] == 'x' && tallman[4] == 'x' && tallman[5] == 'x' ||
                tallman[1] == 'x' && tallman[4] == 'x' && tallman[7] == 'x' ||
                tallman[2] == 'x' && tallman[5] == 'x' && tallman[8] == 'x' ||
                tallman[2] == 'x' && tallman[4] == 'x' && tallman[6] == 'x') {
                outputDiv.innerHTML = 'you win '
                console.log("x vinner!");
                show();
            }
            else if  (tallman[0] == "o" && tallman[1] == 'o' && tallman[2] == 'o' ||
                tallman[0] == 'o' && tallman[3] == 'o' && tallman[6] == 'o' ||
                tallman[0] == 'o' && tallman[4] == 'o' && tallman[8] == 'o' ||
               tallman[6] == 'o' && tallman[7] == 'o' && tallman[8] == 'o' ||
                tallman[3] == 'o' && tallman[4] == 'o' && tallman[5] == 'o' ||
                tallman[1] == 'o' && tallman[4] == 'o' && tallman[7] == 'o' ||
                tallman[2] == 'o' && tallman[5] == 'o' && tallman[8] == 'o' ||
                tallman[2] == 'o' && tallman[4] == 'o' && tallman[6] == 'o') {
                outputDiv.innerHTML = 'you lose '
                console.log("you lose ")

                show();
        }
            
            
        }

        //}
        //function checkDraw() {
          //  if ()
        //}
    
    </script>
</body>
</html>